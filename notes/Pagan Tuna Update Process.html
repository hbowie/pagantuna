<h1>Pagan Tuna Update Process</h1><p>The PaganTuna.com Web site is built from a number of different data sources, using a number of different <a href="http://www.pagantuna.com/about/colophon.html">automated tools</a>. </p><p>Updates to the site are done in the following major phases. The first only need to be done when that particular data source has been updated. The last phase always needs to be performed. </p><p>The local copy of the PaganTuna site, as well as other pertinent information about the site, are stored at the following location.</p><pre><code>~/Sites/pagantuna/</code></pre><h2>1. Site Layout</h2><p>BBEdit templates are used to define common elements of the Web pages, to allow easy updates to the layout of the site. </p><p>Make any desired updates to the BBEdit templates stored at the following location:</p><pre><code>~/Sites/pagantuna/templates</code></pre><p>Delete the following folder:</p><pre><code>~/Sites/pagantuna/web copy</code></pre><p>Duplicate the following folder, creating a new web copy folder:</p><pre><code>~/Sites/pagantuna/web</code></pre><p>Delete the entire contents of the web folder. </p><p>Run the &#8220;Restore Singletons&#8221; Automator workflow within the pagantuna/scripts folder.</p><p>Run the &#8220;Restore Wisdom Index&#8221; Automator workflow within the pagantuna/scripts folder.</p><p>Use the BBEdit menu item Markup / Update / Site for the pagantuna/web site.</p><p>Use the BBEdit menu item Markup / Update / Site for the pagantuna/factory.</p><h2>2. Quotations</h2><p>Quotations are updated using <a href="http://www.powersurgepub.com/products/iwisdom.html">iWisdom</a>. </p><p>The quotations are stored in the following folder:</p><pre><code>~/Dropbox/Text/iWisdom/</code></pre><p>After adding/updating quotations in iWisdom, publish the collection using the following steps.</p><ul><li><p>Select the iWisdom menu item File / Publish. </p></li><li><p>Select the &#8220;/Users/hbowie/Sites/pagantuna&#8221; Publish to location from the dropdown menu within the Publish window. </p></li><li><p>Make sure the Publish Script is set to &#8220;/Users/hbowie/Sites/pagantuna/scripts/wisdom_script.tcz&#8221;.</p></li><li><p>Click on the Publish Now button.</p></li></ul><p>The iWisdom publication process will place updated copies of the iWisdom data in the pagantuna/data folder. These files will be used as input to the final phase. </p><h2>3. Blog Posts</h2><p>Blog posts are stored at the following location:</p><p>~/Dropbox/Text/Words</p><p>Blog posts are generally written in the <a href="http://daringfireball.net/projects/markdown/">Markdown</a> format using BBedit.</p><p>The metadata about the posts is updated using <a href="http://www.powersurgepub.com/products/twodue.html">TwoDue</a>.</p><p>Use TwoDue to open the folder containing the blog posts (see above), since the necessary TwoDue metadata is also stored in this same folder (twodue.tdu, twodue.xml, etc.). </p><p>Take the following steps when preparing a new post for publication.</p><ul><li><p>Make sure the file name, minus the extension, reflects the desired title of the post.  </p></li><li><p>Delete any title within the text itself.</p></li><li><p>Delete any byline from the text.  </p></li><li><p>Copy any referenced graphic files to the pagantuna/web/images folder.  </p></li><li><p>Change any internal PaganTuna links to relative links. </p></li><li><p>Change links for any quotations to relative links to pagantuna/web/wisdom.</p></li><li><p>Change separators in PaganTuna links from underscores to dashes.</p></li><li><p>Use BBEdit to export the post from Markdown to HTML, using the same file name, but with an extension of .html.  </p></li><li><p>Run the SmartyPants text filter against the resulting HTML file to use the proper typographic symbols. </p></li><li><p>Set the due date for the corresponding item in Two Due to the publication date. </p></li><li><p>Check the Tags in Two Due and make sure they are set appropriately.  </p></li><li><p>Select the teaser for the post to appear on the home page and copy and paste it from the HTML file to the Description block for the post in TwoDue. Remove links to images and other internal PaganTuna links from the teaser text.  </p></li><li><p>Change the Two Due status to closed.  </p></li></ul><p>Now publish the blog collection using the script at the following location:</p><pre><code>~/Dropbox/Text/Words/twodue.tcz</code></pre><h2>4. Generate Web Pages</h2><p>The actual Web pages are generated using <a href="http://www.powersurgepub.com/products/pstextmerge.html">PSTextMerge</a>.</p><p>The pages are generated using <a href="http://www.powersurgepub.com/products/pstextmerge/opguide/template.html">PSTextMerge templates</a> stored in the pagantuna/factory folder. </p><p>Run the script at the following location:</p><pre><code>~/Sites/pagantuna/scripts</code></pre><p>Use Transmit to sync the Web site with the local copy that has just been updated. </p><p>The local copy of the site is stored at the following location:</p><pre><code>~/Sites/pagantuna/web</code></pre>